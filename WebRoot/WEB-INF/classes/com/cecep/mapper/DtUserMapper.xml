<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cecep.dao.DtUserMapper">
	<resultMap id="BaseResultMap" type="com.cecep.model.DtUser">
		<id column="user_serial" property="userSerial" jdbcType="BIGINT" />
		<result column="user_no" property="userNo" jdbcType="NVARCHAR" />
		<result column="user_lname" property="userLname" jdbcType="NVARCHAR" />
		<result column="user_fname" property="userFname" jdbcType="NVARCHAR" />
		<result column="dep_no" property="depNo" jdbcType="VARCHAR" />
		<result column="user_dep" property="userDep" jdbcType="INTEGER" />
		<result column="user_depname" property="userDepname" jdbcType="NVARCHAR" />
		<result column="user_workday" property="userWorkday" jdbcType="TIMESTAMP" />
		<result column="user_duty" property="userDuty" jdbcType="NVARCHAR" />
		<result column="user_card" property="userCard" jdbcType="NVARCHAR" />
		<result column="user_finger" property="userFinger" jdbcType="NVARCHAR" />
		<result column="user_password" property="userPassword"
			jdbcType="VARCHAR" />
		<result column="pwd_begin" property="pwdBegin" jdbcType="TIMESTAMP" />
		<result column="pwd_end" property="pwdEnd" jdbcType="TIMESTAMP" />
		<result column="user_type" property="userType" jdbcType="SMALLINT" />
		<result column="pact_begin" property="pactBegin" jdbcType="TIMESTAMP" />
		<result column="pact_end" property="pactEnd" jdbcType="TIMESTAMP" />
		<result column="user_level" property="userLevel" jdbcType="INTEGER" />
		<result column="user_photo" property="userPhoto" jdbcType="INTEGER" />
		<result column="user_sex" property="userSex" jdbcType="NVARCHAR" />
		<result column="user_nation" property="userNation" jdbcType="NVARCHAR" />
		<result column="user_xueli" property="userXueli" jdbcType="NVARCHAR" />
		<result column="user_native" property="userNative" jdbcType="NVARCHAR" />
		<result column="user_birthday" property="userBirthday"
			jdbcType="TIMESTAMP" />
		<result column="user_id" property="userId" jdbcType="NVARCHAR" />
		<result column="user_post" property="userPost" jdbcType="NVARCHAR" />
		<result column="user_linkman" property="userLinkman" jdbcType="NVARCHAR" />
		<result column="user_telephone" property="userTelephone"
			jdbcType="NVARCHAR" />
		<result column="user_address" property="userAddress" jdbcType="NVARCHAR" />
		<result column="user_email" property="userEmail" jdbcType="NVARCHAR" />
		<result column="user_1" property="user1" jdbcType="NVARCHAR" />
		<result column="user_2" property="user2" jdbcType="NVARCHAR" />
		<result column="user_bz" property="userBz" jdbcType="NVARCHAR" />
		<result column="kq_rule" property="kqRule" jdbcType="VARCHAR" />
		<result column="kq_taoban" property="kqTaoban" jdbcType="NVARCHAR" />
		<result column="kq_tiaoxiu" property="kqTiaoxiu" jdbcType="INTEGER" />
		<result column="xf_time" property="xfTime" jdbcType="TIMESTAMP" />
		<result column="xf_jiange" property="xfJiange" jdbcType="INTEGER" />
		<result column="xf_je" property="xfJe" jdbcType="INTEGER" />
		<result column="user_sj" property="userSj" jdbcType="TIMESTAMP" />
		<result column="user_rank" property="userRank" jdbcType="NVARCHAR" />
		<result column="gly_img" property="glyImg" jdbcType="INTEGER" />
		<result column="user_ac" property="userAc" jdbcType="INTEGER" />
		<result column="user_gsbh" property="userGsbh" jdbcType="VARCHAR" />
		<result column="user_yglx" property="userYglx" jdbcType="VARCHAR" />
		<result column="user_zhbh" property="userZhbh" jdbcType="VARCHAR" />
		<result column="user_zhlx" property="userZhlx" jdbcType="VARCHAR" />
		<result column="user_txm" property="userTxm" jdbcType="VARCHAR" />
		<result column="user_lx" property="userLx" jdbcType="INTEGER" />
		<result column="user_mj" property="userMj" jdbcType="INTEGER" />

		<!-- 登录表 -->
		<result column="loginid" property="loginid" jdbcType="VARCHAR" />
		<result column="sn" property="sn" jdbcType="VARCHAR" />
		<result column="cname" property="cname" jdbcType="VARCHAR" />
		<result column="password" property="password" jdbcType="VARCHAR" />
		<result column="uuaccountstatus" property="uuaccountstatus"
			jdbcType="VARCHAR" />
	</resultMap>
	<sql id="Base_Column_List">
		user_serial, user_no, user_lname, user_fname, dep_no, user_dep, user_depname,
		user_workday,
		user_duty, user_card, user_finger, user_password, pwd_begin, pwd_end, user_type,
		pact_begin, pact_end, user_level, user_photo, user_sex, user_nation,
		user_xueli,
		user_native, user_birthday, user_id, user_post, user_linkman, user_telephone,
		user_address,
		user_email, user_1, user_2, user_bz, kq_rule, kq_taoban, kq_tiaoxiu, xf_time,
		xf_jiange,
		xf_je, user_sj, user_rank, gly_img, user_ac, user_gsbh, user_yglx,
		user_zhbh, user_zhlx,
		user_txm, user_lx, user_mj
	</sql>
	<sql id="DtUser_Column_List">
		dbo.dt_user.user_serial, dbo.dt_user.user_no, dbo.dt_user.user_lname, dbo.dt_user.user_fname,
		dbo.dt_user.dep_no, dbo.dt_user.user_dep, dbo.dt_user.user_depname,
		dbo.dt_user.user_workday,
		dbo.dt_user.user_duty, dbo.dt_user.user_card, dbo.dt_user.user_finger,
		dbo.dt_user.user_password, dbo.dt_user.pwd_begin, dbo.dt_user.pwd_end,
		dbo.dt_user.user_type,
		dbo.dt_user.pact_begin, dbo.dt_user.pact_end, dbo.dt_user.user_level, dbo.dt_user.user_photo,
		dbo.dt_user.user_sex, dbo.dt_user.user_nation, dbo.dt_user.user_xueli,
		dbo.dt_user.user_native, dbo.dt_user.user_birthday,
		dbo.dt_user.user_id, dbo.dt_user.user_post, dbo.dt_user.user_linkman,
		dbo.dt_user.user_telephone, dbo.dt_user.user_address,
		dbo.dt_user.user_email, dbo.dt_user.user_1, dbo.dt_user.user_2,
		dbo.dt_user.user_bz, dbo.dt_user.kq_rule, dbo.dt_user.kq_taoban,
		dbo.dt_user.kq_tiaoxiu, dbo.dt_user.xf_time, dbo.dt_user.xf_jiange,
		dbo.dt_user.xf_je, dbo.dt_user.user_sj, dbo.dt_user.user_rank,
		dbo.dt_user.gly_img, dbo.dt_user.user_ac, dbo.dt_user.user_gsbh,
		dbo.dt_user.user_yglx, dbo.dt_user.user_zhbh, dbo.dt_user.user_zhlx,
		dbo.dt_user.user_txm, dbo.dt_user.user_lx, dbo.dt_user.user_mj
	</sql>
	<resultMap id="SimpleResultMap" type="com.cecep.model.DtUser"
		extends="BaseResultMap">
		<result column="card_lx" property="cardLx" jdbcType="INTEGER" />
		<result column="tt_name" property="ttName" jdbcType="VARCHAR" />
		<result column="card_xh" property="cardXh" jdbcType="VARCHAR" />
		<result column="card_type" property="cardType" jdbcType="INTEGER" />
		<result column="card_hao" property="cardHao" jdbcType="VARCHAR" />
		<result column="card_serial" property="cardSerial" jdbcType="CHAR" />
		<result column="card_sj" property="cardSj" jdbcType="TIMESTAMP" />
		<result column="loss_count" property="cardLossCount" jdbcType="INTEGER" />
		<result column="card_bz" property="cardBz" jdbcType="NVARCHAR" />
		<result column="role_id" property="roleId" jdbcType="INTEGER" />
		<result column="role_name" property="roleName" jdbcType="VARCHAR" />
		<result column="ac_bh" property="acBh" jdbcType="CHAR" />
		<result column="ac_name" property="acName" jdbcType="VARCHAR" />
		<result column="user_type_name" property="userTypeName"
			jdbcType="VARCHAR" />
		<result column="company" property="company" jdbcType="VARCHAR" />
		<result column="mj" property="mj" jdbcType="INTEGER" />
	</resultMap>

	<resultMap id="ComplexResultMap" type="com.cecep.model.DtUser"
		extends="BaseResultMap">
		<result column="card_xh" property="cardXh" jdbcType="VARCHAR" />
		<result column="card_hao" property="cardHao" jdbcType="VARCHAR" />
		<result column="card_serial" property="cardSerial" jdbcType="CHAR" />
		<result column="card_lx" property="cardLx" jdbcType="INTEGER" />
		<result column="tt_name" property="ttName" jdbcType="VARCHAR" />
		<result column="card_type" property="cardType" jdbcType="INTEGER" />
		<result column="card_sj" property="cardSj" jdbcType="TIMESTAMP" />
		<result column="loss_count" property="cardLossCount" jdbcType="INTEGER" />
		<result column="card_bz" property="cardBz" jdbcType="NVARCHAR" />
		<result column="role_id" property="roleId" jdbcType="INTEGER" />
		<result column="role_name" property="roleName" jdbcType="VARCHAR" />
		<result column="ac_bh" property="acBh" jdbcType="CHAR" />
		<result column="ac_name" property="acName" jdbcType="VARCHAR" />
		<result column="pass_max" property="passMax" jdbcType="INTEGER" />
		<result column="ac_pass" property="acPass" jdbcType="VARCHAR" />
		<result column="ac_kssj" property="acBegin" jdbcType="TIMESTAMP" />
		<result column="ac_jssj" property="acEnd" jdbcType="TIMESTAMP" />
		<result column="sj" property="acSj" jdbcType="TIMESTAMP" />
		<result column="ac_money" property="acMoney" jdbcType="INTEGER" />
		<result column="med_money" property="medMoney" jdbcType="INTEGER" />
		<result column="user_type_name" property="userTypeName"
			jdbcType="VARCHAR" />
		<result column="mj" property="mj" jdbcType="INTEGER" />
	</resultMap>
	<select id="selectByPrimaryKey" resultMap="ComplexResultMap"
		parameterType="java.lang.Long">
		select
		<include refid="DtUser_Column_List" />
		,p.mj, dbo.dt_card.xh as card_xh, dbo.dt_card.card_hao as card_hao,
		dbo.dt_card.card_serial as card_serial, dbo.dt_card.card_lx as
		card_lx, dbo.tt_card.tt_name as tt_name, dbo.dt_card.card_type as
		card_type, dbo.dt_card.sj as card_sj, dbo.dt_card.card_bz as card_bz,
		dbo.dt_card.loss_count as loss_count, dbo.dt_ac_user.ac_money as
		acMoney, dbo.dt_ac_user.ac_pass as ac_pass, dbo.dt_ac_user.ac_kssj as
		ac_kssj, dbo.dt_ac_user.ac_jssj as ac_jssj, dbo.dt_ac_type.ac_bh as
		ac_bh, dbo.dt_ac_type.ac_name as ac_name, dbo.dt_ac_type.pass_max as
		pass_max, dbo.dt_ac_card.sj as sj, dbo.sys_role.role_id as role_id,
		dbo.sys_role.role_name as role_name, dbo.tt_lizhi.tt_name as
		user_type_name, dbo.med_account.amount as med_money,p.deadline
		from dbo.dt_user
		left join dbo.dt_card
		on dbo.dt_user.user_serial = dbo.dt_card.user_serial
		left join dbo.tt_card
		on dbo.dt_card.card_lx = dbo.tt_card.tt_xh
		left join dbo.dt_ac_user
		on dbo.dt_user.user_serial = dbo.dt_ac_user.user_serial
		left join dbo.dt_ac_type
		on dbo.dt_ac_user.ac_type = dbo.dt_ac_type.ac_bh
		left join dbo.dt_ac_card
		on dbo.dt_card.card_serial = dbo.dt_ac_card.card_serial
		left join dbo.role_user
		on dbo.dt_user.user_serial = dbo.role_user.user_serial
		left join dbo.sys_role
		on dbo.role_user.role_id = dbo.sys_role.role_id
		left join dbo.med_account
		on dbo.dt_user.user_serial = dbo.med_account.card_number
		left join dbo.tt_lizhi
		on dbo.dt_user.user_type = dbo.tt_lizhi.tt_order
		left join cecep_user_privilege p on dbo.dt_user.user_serial=p.user_serial
		where dbo.dt_user.user_serial = #{value,jdbcType=BIGINT}
	</select>

	<parameterMap type="java.util.Map" id="deleteMap">
		<parameter property="userSerial" jdbcType="BIGINT" mode="IN" />
	</parameterMap>

	<update id="deleteByPrimaryKey" parameterMap="deleteMap"
		statementType="CALLABLE">
		{call cecep_delete_user (?)}
	</update>

	<insert id="insert" parameterType="com.cecep.model.DtUser">
		insert into dbo.dt_user (user_serial, user_no, user_lname,
		user_fname, dep_no, user_dep,
		user_depname, user_workday, user_duty,
		user_card, user_finger, user_password,
		pwd_begin, pwd_end, user_type,
		pact_begin, pact_end, user_level,
		user_photo, user_sex, user_nation,
		user_xueli, user_native, user_birthday,
		user_id, user_post, user_linkman,
		user_telephone, user_address, user_email,
		user_1, user_2, user_bz,
		kq_rule, kq_taoban, kq_tiaoxiu,
		xf_time, xf_jiange, xf_je,
		user_sj, user_rank, gly_img,
		user_ac, user_gsbh, user_yglx,
		user_zhbh, user_zhlx, user_txm,
		user_lx, user_mj)
		values (#{userSerial,jdbcType=BIGINT}, #{userNo,jdbcType=NVARCHAR},
		#{userLname,jdbcType=NVARCHAR},
		#{userFname,jdbcType=NVARCHAR}, #{depNo,jdbcType=VARCHAR}, #{userDep,jdbcType=INTEGER},
		#{userDepname,jdbcType=NVARCHAR}, #{userWorkday,jdbcType=TIMESTAMP},
		#{userDuty,jdbcType=NVARCHAR},
		#{userCard,jdbcType=NVARCHAR}, #{userFinger,jdbcType=NVARCHAR}, #{userPassword,jdbcType=VARCHAR},
		#{pwdBegin,jdbcType=TIMESTAMP}, #{pwdEnd,jdbcType=TIMESTAMP},
		#{userType,jdbcType=SMALLINT},
		#{pactBegin,jdbcType=TIMESTAMP}, #{pactEnd,jdbcType=TIMESTAMP}, #{userLevel,jdbcType=INTEGER},
		#{userPhoto,jdbcType=INTEGER}, #{userSex,jdbcType=NVARCHAR},
		#{userNation,jdbcType=NVARCHAR},
		#{userXueli,jdbcType=NVARCHAR}, #{userNative,jdbcType=NVARCHAR}, #{userBirthday,jdbcType=TIMESTAMP},
		#{userId,jdbcType=NVARCHAR}, #{userPost,jdbcType=NVARCHAR},
		#{userLinkman,jdbcType=NVARCHAR},
		#{userTelephone,jdbcType=NVARCHAR}, #{userAddress,jdbcType=NVARCHAR}, #{userEmail,jdbcType=NVARCHAR},
		#{user1,jdbcType=NVARCHAR}, #{user2,jdbcType=NVARCHAR},
		#{userBz,jdbcType=NVARCHAR},
		#{kqRule,jdbcType=VARCHAR}, #{kqTaoban,jdbcType=NVARCHAR}, #{kqTiaoxiu,jdbcType=INTEGER},
		#{xfTime,jdbcType=TIMESTAMP}, #{xfJiange,jdbcType=INTEGER},
		#{xfJe,jdbcType=INTEGER},
		getdate(), #{userRank,jdbcType=NVARCHAR}, #{glyImg,jdbcType=INTEGER},
		#{userAc,jdbcType=INTEGER}, #{userGsbh,jdbcType=VARCHAR},
		#{userYglx,jdbcType=VARCHAR},
		#{userZhbh,jdbcType=VARCHAR}, #{userZhlx,jdbcType=VARCHAR}, #{userTxm,jdbcType=VARCHAR},
		#{userLx,jdbcType=INTEGER}, #{userMj,jdbcType=INTEGER})
	</insert>
	<insert id="insertSelective" parameterType="com.cecep.model.DtUser">
		<selectKey resultType="java.lang.Long" keyProperty="userSerial"
			order="BEFORE">
			SELECT SCOPE_IDENTITY()
		</selectKey>
		insert into dbo.dt_user
		<trim prefix="(" suffix=")" suffixOverrides=",">
			user_serial,
			<if test="userNo != null">
				user_no,
			</if>
			<if test="userLname != null">
				user_lname,
			</if>
			<if test="userFname != null">
				user_fname,
			</if>
			<if test="depNo != null">
				dep_no,
			</if>
			<if test="userDep != null">
				user_dep,
			</if>
			<if test="userDepname != null">
				user_depname,
			</if>
			<if test="userWorkday != null">
				user_workday,
			</if>
			<if test="userDuty != null">
				user_duty,
			</if>
			<if test="userCard != null">
				user_card,
			</if>
			<if test="userFinger != null">
				user_finger,
			</if>
			<if test="userPassword != null">
				user_password,
			</if>
			<if test="pwdBegin != null">
				pwd_begin,
			</if>
			<if test="pwdEnd != null">
				pwd_end,
			</if>
			<if test="userType != null">
				user_type,
			</if>
			<if test="pactBegin != null">
				pact_begin,
			</if>
			<if test="pactEnd != null">
				pact_end,
			</if>
			<if test="userLevel != null">
				user_level,
			</if>
			<if test="userPhoto != null">
				user_photo,
			</if>
			<if test="userSex != null">
				user_sex,
			</if>
			<if test="userNation != null">
				user_nation,
			</if>
			<if test="userXueli != null">
				user_xueli,
			</if>
			<if test="userNative != null">
				user_native,
			</if>
			<if test="userBirthday != null">
				user_birthday,
			</if>
			<if test="userId != null">
				user_id,
			</if>
			<if test="userPost != null">
				user_post,
			</if>
			<if test="userLinkman != null">
				user_linkman,
			</if>
			<if test="userTelephone != null">
				user_telephone,
			</if>
			<if test="userAddress != null">
				user_address,
			</if>
			<if test="userEmail != null">
				user_email,
			</if>
			<if test="user1 != null">
				user_1,
			</if>
			<if test="user2 != null">
				user_2,
			</if>
			<if test="userBz != null">
				user_bz,
			</if>
			<if test="kqRule != null">
				kq_rule,
			</if>
			<if test="kqTaoban != null">
				kq_taoban,
			</if>
			<if test="kqTiaoxiu != null">
				kq_tiaoxiu,
			</if>
			<if test="xfTime != null">
				xf_time,
			</if>
			<if test="xfJiange != null">
				xf_jiange,
			</if>
			<if test="xfJe != null">
				xf_je,
			</if>
			<if test="userSj != null">
				user_sj,
			</if>
			<if test="userRank != null">
				user_rank,
			</if>
			<if test="glyImg != null">
				gly_img,
			</if>
			<if test="userAc != null">
				user_ac,
			</if>
			<if test="userGsbh != null">
				user_gsbh,
			</if>
			<if test="userYglx != null">
				user_yglx,
			</if>
			<if test="userZhbh != null">
				user_zhbh,
			</if>
			<if test="userZhlx != null">
				user_zhlx,
			</if>
			<if test="userTxm != null">
				user_txm,
			</if>
			<if test="userLx != null">
				user_lx,
			</if>
			<if test="userMj != null">
				user_mj,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			#{userSerial,jdbcType=BIGINT},
			<if test="userNo != null">
				#{userNo,jdbcType=NVARCHAR},
			</if>
			<if test="userLname != null">
				#{userLname,jdbcType=NVARCHAR},
			</if>
			<if test="userFname != null">
				#{userFname,jdbcType=NVARCHAR},
			</if>
			<if test="depNo != null">
				#{depNo,jdbcType=VARCHAR},
			</if>
			<if test="userDep != null">
				#{userDep,jdbcType=INTEGER},
			</if>
			<if test="userDepname != null">
				#{userDepname,jdbcType=NVARCHAR},
			</if>
			<if test="userWorkday != null">
				#{userWorkday,jdbcType=TIMESTAMP},
			</if>
			<if test="userDuty != null">
				#{userDuty,jdbcType=NVARCHAR},
			</if>
			<if test="userCard != null">
				#{userCard,jdbcType=NVARCHAR},
			</if>
			<if test="userFinger != null">
				#{userFinger,jdbcType=NVARCHAR},
			</if>
			<if test="userPassword != null">
				#{userPassword,jdbcType=VARCHAR},
			</if>
			<if test="pwdBegin != null">
				#{pwdBegin,jdbcType=TIMESTAMP},
			</if>
			<if test="pwdEnd != null">
				#{pwdEnd,jdbcType=TIMESTAMP},
			</if>
			<if test="userType != null">
				#{userType,jdbcType=SMALLINT},
			</if>
			<if test="pactBegin != null">
				#{pactBegin,jdbcType=TIMESTAMP},
			</if>
			<if test="pactEnd != null">
				#{pactEnd,jdbcType=TIMESTAMP},
			</if>
			<if test="userLevel != null">
				#{userLevel,jdbcType=INTEGER},
			</if>
			<if test="userPhoto != null">
				#{userPhoto,jdbcType=INTEGER},
			</if>
			<if test="userSex != null">
				#{userSex,jdbcType=NVARCHAR},
			</if>
			<if test="userNation != null">
				#{userNation,jdbcType=NVARCHAR},
			</if>
			<if test="userXueli != null">
				#{userXueli,jdbcType=NVARCHAR},
			</if>
			<if test="userNative != null">
				#{userNative,jdbcType=NVARCHAR},
			</if>
			<if test="userBirthday != null">
				#{userBirthday,jdbcType=TIMESTAMP},
			</if>
			<if test="userId != null">
				#{userId,jdbcType=NVARCHAR},
			</if>
			<if test="userPost != null">
				#{userPost,jdbcType=NVARCHAR},
			</if>
			<if test="userLinkman != null">
				#{userLinkman,jdbcType=NVARCHAR},
			</if>
			<if test="userTelephone != null">
				#{userTelephone,jdbcType=NVARCHAR},
			</if>
			<if test="userAddress != null">
				#{userAddress,jdbcType=NVARCHAR},
			</if>
			<if test="userEmail != null">
				#{userEmail,jdbcType=NVARCHAR},
			</if>
			<if test="user1 != null">
				#{user1,jdbcType=NVARCHAR},
			</if>
			<if test="user2 != null">
				#{user2,jdbcType=NVARCHAR},
			</if>
			<if test="userBz != null">
				#{userBz,jdbcType=NVARCHAR},
			</if>
			<if test="kqRule != null">
				#{kqRule,jdbcType=VARCHAR},
			</if>
			<if test="kqTaoban != null">
				#{kqTaoban,jdbcType=NVARCHAR},
			</if>
			<if test="kqTiaoxiu != null">
				#{kqTiaoxiu,jdbcType=INTEGER},
			</if>
			<if test="xfTime != null">
				#{xfTime,jdbcType=TIMESTAMP},
			</if>
			<if test="xfJiange != null">
				#{xfJiange,jdbcType=INTEGER},
			</if>
			<if test="xfJe != null">
				#{xfJe,jdbcType=INTEGER},
			</if>
			<if test="userSj != null">
				#{userSj,jdbcType=TIMESTAMP},
			</if>
			<if test="userRank != null">
				#{userRank,jdbcType=NVARCHAR},
			</if>
			<if test="glyImg != null">
				#{glyImg,jdbcType=INTEGER},
			</if>
			<if test="userAc != null">
				#{userAc,jdbcType=INTEGER},
			</if>
			<if test="userGsbh != null">
				#{userGsbh,jdbcType=VARCHAR},
			</if>
			<if test="userYglx != null">
				#{userYglx,jdbcType=VARCHAR},
			</if>
			<if test="userZhbh != null">
				#{userZhbh,jdbcType=VARCHAR},
			</if>
			<if test="userZhlx != null">
				#{userZhlx,jdbcType=VARCHAR},
			</if>
			<if test="userTxm != null">
				#{userTxm,jdbcType=VARCHAR},
			</if>
			<if test="userLx != null">
				#{userLx,jdbcType=INTEGER},
			</if>
			<if test="userMj != null">
				#{userMj,jdbcType=INTEGER},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.cecep.model.DtUser">
		update dbo.dt_user
		<set>
			<if test="userNo != null">
				user_no = #{userNo},
			</if>
			<if test="userLname != null">
				user_lname = #{userLname},
			</if>
			<if test="depNo != null">
				dep_no = #{depNo},
			</if>
			<if test="userDep != null">
				user_dep = #{userDep},
			</if>
			<if test="userDepname != null">
				user_depname = #{userDepname},
			</if>
			<if test="userDuty != null">
				user_duty = #{userDuty},
			</if>
			<if test="userType != null">
				user_type = #{userType},
			</if>
			<if test="userSex != null">
				user_sex = #{userSex},
			</if>
			<if test="userNation != null">
				user_nation = #{userNation},
			</if>
			<if test="userXueli != null">
				user_xueli = #{userXueli},
			</if>
			<if test="userNative != null">
				user_native = #{userNative},
			</if>
			<if test="userBirthday != null">
				user_birthday = #{userBirthday},
			</if>
			<if test="userId != null">
				user_id = #{userId},
			</if>
			<if test="userPost != null">
				user_post = #{userPost},
			</if>
			<if test="userTelephone != null">
				user_telephone = #{userTelephone},
			</if>
			<if test="userAddress != null">
				user_address = #{userAddress},
			</if>
			<if test="userEmail != null">
				user_email = #{userEmail},
			</if>
			<if test="userBz != null">
				user_bz = #{userBz},
			</if>
			<if test="userSj != null">
				user_sj = #{userSj},
			</if>
			<if test="userSj == null">
				user_sj = getdate()
			</if>
		</set>
		where user_serial = #{userSerial,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.cecep.model.DtUser">
		update dbo.dt_user
		set user_no = #{userNo,jdbcType=NVARCHAR},
		user_lname = #{userLname,jdbcType=NVARCHAR},
		user_fname = #{userFname,jdbcType=NVARCHAR},
		dep_no = #{depNo,jdbcType=VARCHAR},
		user_dep = #{userDep,jdbcType=INTEGER},
		user_depname = #{userDepname,jdbcType=NVARCHAR},
		user_workday = #{userWorkday,jdbcType=TIMESTAMP},
		user_duty = #{userDuty,jdbcType=NVARCHAR},
		user_card = #{userCard,jdbcType=NVARCHAR},
		user_finger = #{userFinger,jdbcType=NVARCHAR},
		user_password = #{userPassword,jdbcType=VARCHAR},
		pwd_begin = #{pwdBegin,jdbcType=TIMESTAMP},
		pwd_end = #{pwdEnd,jdbcType=TIMESTAMP},
		user_type = #{userType,jdbcType=SMALLINT},
		pact_begin = #{pactBegin,jdbcType=TIMESTAMP},
		pact_end = #{pactEnd,jdbcType=TIMESTAMP},
		user_level = #{userLevel,jdbcType=INTEGER},
		user_photo = #{userPhoto,jdbcType=INTEGER},
		user_sex = #{userSex,jdbcType=NVARCHAR},
		user_nation = #{userNation,jdbcType=NVARCHAR},
		user_xueli = #{userXueli,jdbcType=NVARCHAR},
		user_native = #{userNative,jdbcType=NVARCHAR},
		user_birthday = #{userBirthday,jdbcType=TIMESTAMP},
		user_id = #{userId,jdbcType=NVARCHAR},
		user_post = #{userPost,jdbcType=NVARCHAR},
		user_linkman = #{userLinkman,jdbcType=NVARCHAR},
		user_telephone = #{userTelephone,jdbcType=NVARCHAR},
		user_address = #{userAddress,jdbcType=NVARCHAR},
		user_email = #{userEmail,jdbcType=NVARCHAR},
		user_1 = #{user1,jdbcType=NVARCHAR},
		user_2 = #{user2,jdbcType=NVARCHAR},
		user_bz = #{userBz,jdbcType=NVARCHAR},
		kq_rule = #{kqRule,jdbcType=VARCHAR},
		kq_taoban = #{kqTaoban,jdbcType=NVARCHAR},
		kq_tiaoxiu = #{kqTiaoxiu,jdbcType=INTEGER},
		xf_time = #{xfTime,jdbcType=TIMESTAMP},
		xf_jiange = #{xfJiange,jdbcType=INTEGER},
		xf_je = #{xfJe,jdbcType=INTEGER},
		user_sj = #{userSj,jdbcType=TIMESTAMP},
		user_rank = #{userRank,jdbcType=NVARCHAR},
		gly_img = #{glyImg,jdbcType=INTEGER},
		user_ac = #{userAc,jdbcType=INTEGER},
		user_gsbh = #{userGsbh,jdbcType=VARCHAR},
		user_yglx = #{userYglx,jdbcType=VARCHAR},
		user_zhbh = #{userZhbh,jdbcType=VARCHAR},
		user_zhlx = #{userZhlx,jdbcType=VARCHAR},
		user_txm = #{userTxm,jdbcType=VARCHAR},
		user_lx = #{userLx,jdbcType=INTEGER},
		user_mj = #{userMj,jdbcType=INTEGER}
		where user_serial = #{userSerial,jdbcType=BIGINT}
	</update>

	<select id="selectByPage" resultMap="SimpleResultMap"
		parameterType="com.cecep.model.DtUser">
		select u.*
		from (
		 select row_number() over(order by dbo.dt_user.user_dep,p.user_order) as rowNumber,
		    <include refid="DtUser_Column_List" />, dbo.dt_card.card_type as card_type, dbo.dt_card.card_hao as card_hao, dbo.dt_card.card_serial as card_serial, dbo.dt_card.sj as card_sj, dbo.dt_card.loss_count as loss_count, dbo.dt_card.card_bz as card_bz, dbo.dt_card.xh as card_xh, dbo.dt_card.card_lx as card_lx, dbo.tt_card.tt_name as tt_name, dbo.dt_ac_type.ac_bh as ac_bh, dbo.dt_ac_type.ac_name as ac_name,
		    dbo.sys_role.role_id as role_id, dbo.sys_role.role_name as role_name, dbo.tt_lizhi.tt_name as user_type_name,b.dep_name company ,p.mj
		    from dbo.dt_user
		    left join dbo.dt_card
		    on dbo.dt_user.user_serial = dbo.dt_card.user_serial
		    left join dbo.tt_card
		    on dbo.dt_card.card_lx = dbo.tt_card.tt_xh
		    left join dbo.dt_ac_user
		    on dbo.dt_user.user_serial = dbo.dt_ac_user.user_serial
		    left join dbo.dt_ac_type
		    on dbo.dt_ac_user.ac_type = dbo.dt_ac_type.ac_bh
		    left join dbo.role_user
		    on dbo.dt_user.user_serial = dbo.role_user.user_serial
		    left join dbo.sys_role
		    on dbo.role_user.role_id = dbo.sys_role.role_id
		    left join dbo.tt_lizhi
		    on dbo.dt_user.user_type = dbo.tt_lizhi.tt_order
		    left join cecep_dep_parentSerial a on dbo.dt_user.user_dep=a.dep_serial
		    left join dt_dep b on a.parent_serial=b.dep_serial
		    left join cecep_user_privilege p on dbo.dt_user.user_serial=p.user_serial
		    left join visitor_blacklist vb on dbo.dt_user.user_serial=vb.user_serial
		    <if test="whiteList!=null">
				left join dt_ac_dep_user du on dbo.dt_user.user_serial=du.user_serial
			</if>
			<where>	
				vb.id is null
			<if test="userLname != null and userLname != ''">
				and dbo.dt_user.user_lname like '%${userLname}%'
			</if>
			<if test="userNo != null and userNo != ''">
				and ( dbo.dt_user.user_no = #{userNo} or dbo.dt_user.user_lname like
				'%${userNo}%' )
			</if>
			<if test="userTelephone != null and userTelephone != ''">
				and dbo.dt_user.user_telephone = #{userTelephone}
			</if>
			<if test="userDuty != null and userDuty != ''">
				and dbo.dt_user.user_duty = #{userDuty}
			</if>
			<if test="userDep != null">
				and dbo.dt_user.user_dep = #{userDep}
			</if>
			<if test="cardXh != null">
				and dbo.dt_card.xh is not null
			</if>
			<if test="cardXh == null">
				<if test="whiteList==null">
					and dbo.dt_card.xh is null
				</if>
			</if>
			<if test="cardHao != null and cardHao != ''">
				and ( dbo.dt_card.card_hao = #{cardHao} or dbo.dt_card.card_serial =
				#{cardHao} )
			</if>
			<if test="cardType != null">
				and dbo.dt_card.card_type = #{cardType}
			</if>
			<if test="acBh != null and acBh != ''">
				and dbo.dt_ac_type.ac_bh = #{acBh}
			</if>
			<if test="roleId != null">
				and dbo.sys_role.role_id = #{roleId}
			</if>
			<if test="userType != null">
				and dbo.dt_user.user_type = #{userType}
			</if>
			<if test="userDeps!=null">
		    	and dbo.dt_user.user_dep in 
		    	<foreach collection="userDeps" item="item" open="(" close=")" separator=",">
		    		#{item}
		    	</foreach>
		    </if>
		    <if test="userTypes!=null">
		   		 and dbo.dt_user.user_type in 
			    	<foreach collection="userTypes" item="item" open="(" close=")" separator=",">
			    		#{item}
			    	</foreach>
		    </if>
		    <if test="whiteList!=null">
		    	and du.xh is null
		    </if>
			<!-- <if test="openCard==1">
				and dt_user.user_no &lt; '40000000'
			</if> -->
		</where>
		) as u
		<where>
			<if test="start != null and rows != null"> 
				<![CDATA[ u.rowNumber >= #{start} and u.rowNumber < (#{rows} + #{start})]]>
			</if>
		</where>
	</select>
	<select id="selectCount" resultType="java.lang.Integer"
		parameterType="com.cecep.model.DtUser">
		select count(1)
		from dbo.dt_user
		left join dbo.dt_card
		on dbo.dt_user.user_serial = dbo.dt_card.user_serial
		left join dbo.tt_card
		on dbo.dt_card.card_lx = dbo.tt_card.tt_xh
		left join dbo.dt_ac_user
		on dbo.dt_user.user_serial = dbo.dt_ac_user.user_serial
		left join dbo.dt_ac_type
		on dbo.dt_ac_user.ac_type = dbo.dt_ac_type.ac_bh
		left join dbo.role_user
		on dbo.dt_user.user_serial = dbo.role_user.user_serial
		left join dbo.sys_role
		on dbo.role_user.role_id =dbo.sys_role.role_id
		left join dbo.tt_lizhi
		on dbo.dt_user.user_type = dbo.tt_lizhi.tt_order
		left join visitor_blacklist vb on dbo.dt_user.user_serial=vb.user_serial
		left join cecep_dep_parentSerial a on dbo.dt_user.user_dep=a.dep_serial
		<if test="whiteList!=null">
				left join dt_ac_dep_user du on dbo.dt_user.user_serial=du.user_serial
			</if>
			<where>	
				vb.id is null
			<if test="userLname != null and userLname != ''">
				and dbo.dt_user.user_lname like '%${userLname}%'
			</if>
			<if test="userNo != null and userNo != ''">
				and ( dbo.dt_user.user_no = #{userNo} or dbo.dt_user.user_lname like
				'%${userNo}%' )
			</if>
			<if test="userTelephone != null and userTelephone != ''">
				and dbo.dt_user.user_telephone = #{userTelephone}
			</if>
			<if test="userDuty != null and userDuty != ''">
				and dbo.dt_user.user_duty = #{userDuty}
			</if>
			<if test="userDep != null">
				and dbo.dt_user.user_dep = #{userDep}
			</if>
			<if test="cardXh != null">
				and dbo.dt_card.xh is not null
			</if>
			<if test="cardXh == null">
				<if test="whiteList==null">
					and dbo.dt_card.xh is null
				</if>
			</if>
			<if test="cardHao != null and cardHao != ''">
				and ( dbo.dt_card.card_hao = #{cardHao} or dbo.dt_card.card_serial =
				#{cardHao} )
			</if>
			<if test="cardType != null">
				and dbo.dt_card.card_type = #{cardType}
			</if>
			<if test="acBh != null and acBh != ''">
				and dbo.dt_ac_type.ac_bh = #{acBh}
			</if>
			<if test="roleId != null">
				and dbo.sys_role.role_id = #{roleId}
			</if>
			<if test="userType != null">
				and dbo.dt_user.user_type = #{userType}
			</if>
			<if test="userDeps!=null">
		    	and dbo.dt_user.user_dep in 
		    	<foreach collection="userDeps" item="item" open="(" close=")" separator=",">
		    		#{item}
		    	</foreach>
		    </if>
		    <if test="userTypes!=null">
		   		 and dbo.dt_user.user_type in 
			    	<foreach collection="userTypes" item="item" open="(" close=")" separator=",">
			    		#{item}
			    	</foreach>
		    </if>
		    <if test="whiteList!=null">
		    	and du.xh is null
		    </if>
			<!-- <if test="openCard==1">
				and dt_user.user_no &lt; '40000000'
			</if> -->
		</where>
	</select>

	<select id="selectBySelective" resultMap="ComplexResultMap"
		parameterType="com.cecep.model.DtUser">
		select top(1)
		<include refid="DtUser_Column_List" />
		,
		dbo.dt_card.xh as card_xh, dbo.dt_card.card_hao as card_hao,
		dbo.dt_card.card_serial as card_serial, dbo.dt_card.card_lx as card_lx,
		dbo.tt_card.tt_name as tt_name, dbo.dt_card.card_type as card_type,
		dbo.dt_card.sj as card_sj, dbo.dt_card.card_bz as card_bz,
		dbo.dt_card.loss_count as loss_count, dbo.dt_ac_user.ac_money as acMoney,
		dbo.dt_ac_user.ac_kssj as ac_kssj, dbo.dt_ac_user.ac_jssj as ac_jssj,
		dbo.dt_ac_type.ac_bh as ac_bh, dbo.dt_ac_type.ac_name as ac_name,
		dbo.dt_ac_type.pass_max as pass_max, dbo.dt_ac_card.sj as sj,
		dbo.sys_role.role_id as role_id, dbo.sys_role.role_name as role_name,
		user_account.uuaccountstatus,dbo.login_account.loginid,dbo.login_account.password
		from dbo.dt_user
		left join dbo.dt_card
		on dbo.dt_user.user_serial = dbo.dt_card.user_serial
		left join dbo.tt_card
		on dbo.dt_card.card_lx = dbo.tt_card.tt_xh
		left join dbo.dt_ac_user
		on dbo.dt_user.user_serial = dbo.dt_ac_user.user_serial
		left join dbo.dt_ac_type
		on dbo.dt_ac_user.ac_type = dbo.dt_ac_type.ac_bh
		left join dbo.dt_ac_card
		on dbo.dt_card.card_serial = dbo.dt_ac_card.card_serial
		left join dbo.role_user
		on dbo.dt_user.user_serial = dbo.role_user.user_serial
		left join dbo.sys_role
		on dbo.role_user.role_id =dbo.sys_role.role_id
		left join login_account on login_account.sn=dt_user.user_no
		left join user_account on login_account.loginid=user_account.uid
		where dbo.sys_role.role_deleted = 0 and dbo.sys_role.role_status = 0
		<if test="loginid != null and loginid != ''">
			and dbo.login_account.loginid = #{loginid}
		</if>
		<if test="password != null and password != ''">
			and dbo.login_account.password = #{password}
		</if>
	</select>

	<resultMap id="SysMenuResultMap" type="com.cecep.model.SysMenu">
		<id column="menu_id" property="menuId" jdbcType="INTEGER" />
		<result column="menu_name" property="menuName" jdbcType="VARCHAR" />
		<result column="url" property="url" jdbcType="VARCHAR" />
		<result column="sequence" property="sequence" jdbcType="INTEGER" />
		<result column="parent_id" property="parentId" jdbcType="INTEGER" />
		<result column="menu_deleted" property="menuDeleted" jdbcType="INTEGER" />
		<result column="menu_des" property="menuDes" jdbcType="VARCHAR" />
		<collection property="children" ofType="com.cecep.model.SysMenu"
			javaType="java.util.List">
			<id column="menu_id2" property="menuId" jdbcType="INTEGER" />
			<result column="menu_name2" property="menuName" jdbcType="VARCHAR" />
			<result column="url2" property="url" jdbcType="VARCHAR" />
			<result column="sequence2" property="sequence" jdbcType="INTEGER" />
			<result column="parent_id2" property="parentId" jdbcType="INTEGER" />
			<result column="menu_deleted2" property="menuDeleted"
				jdbcType="INTEGER" />
			<result column="menu_des2" property="menuDes" jdbcType="VARCHAR" />
		</collection>
	</resultMap>

	<select id="getMenuTree" resultMap="SysMenuResultMap"
		parameterType="java.lang.Integer">
		select menu.*,menu2.menu_id as menu_id2,menu2.menu_name as
		menu_name2,menu2.url as url2,menu2.sequence as
		sequence2,menu2.parent_id as parent_id2,menu2.menu_deleted as
		menu_deleted2,menu2.menu_des as menu_des2
		from dbo.sys_menu menu
		left join dbo.sys_menu menu2
		on menu.menu_id = menu2.parent_id
		where menu.menu_deleted = 0 and menu2.menu_deleted = 0 and menu2.menu_id is
		not null and menu2.menu_id in ( select menu_id from dbo.menu_role
		where role_id = #{value,jdbcType=INTEGER} )
		order by menu.sequence asc,menu2.sequence asc
	</select>

	<select id="selectMaxUserSerial" resultType="java.lang.Integer">
		select module_user
		from wt_module
		where module_id = '0002'
	</select>

	<update id="updateUserSerial">
		update wt_module
		set module_user = module_user + 1
		where module_id = '0002'
	</update>

	<insert id="insertRoleUser" parameterType="com.cecep.model.DtUser">
		insert into dbo.role_user (role_id, user_serial) values
		(#{roleId,jdbcType=INTEGER}, #{userSerial,jdbcType=BIGINT})
	</insert>

	<update id="updateRoleUser" parameterType="com.cecep.model.DtUser">
		update dbo.role_user
		set role_id = #{roleId,jdbcType=INTEGER}
		where user_serial = #{userSerial,jdbcType=BIGINT}
	</update>

	<resultMap id="DtDepResultMap" type="com.cecep.model.DtDep">
		<id column="dep_serial" property="depSerial" jdbcType="BIGINT" />
		<result column="dep_parent" property="depParent" jdbcType="INTEGER" />
		<result column="dep_order" property="depOrder" jdbcType="INTEGER" />
		<result column="dep_name" property="depName" jdbcType="NVARCHAR" />
		<result column="dep_no" property="depNo" jdbcType="VARCHAR" />
		<result column="dep_rule" property="depRule" jdbcType="NVARCHAR" />
		<result column="dep_regserial" property="depRegserial"
			jdbcType="NVARCHAR" />
	</resultMap>

	<select id="selectDtDepByPrimaryKey" resultMap="DtDepResultMap"
		parameterType="java.lang.Long">
		select dep_serial, dep_parent, dep_order, dep_name, dep_no, dep_rule,
		dep_regserial
		from dbo.dt_dep
		where dep_serial = #{depSerial,jdbcType=BIGINT}
	</select>

	<resultMap id="DtAcTypeResultMap" type="com.cecep.model.DtAcType">
		<id column="ac_bh" property="acBh" jdbcType="CHAR" />
		<result column="ac_name" property="acName" jdbcType="NVARCHAR" />
		<result column="money_type" property="moneyType" jdbcType="INTEGER" />
		<result column="reg_money" property="regMoney" jdbcType="DECIMAL" />
		<result column="reg_manage" property="regManage" jdbcType="INTEGER" />
		<result column="reg_ratio" property="regRatio" jdbcType="INTEGER" />
		<result column="ac_limit" property="acLimit" jdbcType="INTEGER" />
		<result column="ac_jssj" property="acJssj" jdbcType="TIMESTAMP" />
		<result column="ac_pass" property="acPass" jdbcType="VARCHAR" />
		<result column="ac_pass_rule" property="acPassRule" jdbcType="VARCHAR" />
		<result column="ac_subsidy" property="acSubsidy" jdbcType="INTEGER" />
		<result column="ac_sub_rule" property="acSubRule" jdbcType="INTEGER" />
		<result column="ac_sub_limit" property="acSubLimit" jdbcType="INTEGER" />
		<result column="discount_rate" property="discountRate"
			jdbcType="VARCHAR" />
		<result column="money_max" property="moneyMax" jdbcType="DECIMAL" />
		<result column="money_min" property="moneyMin" jdbcType="DECIMAL" />
		<result column="day_max_m" property="dayMaxM" jdbcType="DECIMAL" />
		<result column="day_max_t" property="dayMaxT" jdbcType="INTEGER" />
		<result column="meal_max_m" property="mealMaxM" jdbcType="INTEGER" />
		<result column="meal_max_t" property="mealMaxT" jdbcType="INTEGER" />
		<result column="time_max_m" property="timeMaxM" jdbcType="DECIMAL" />
		<result column="ac_unit" property="acUnit" jdbcType="INTEGER" />
		<result column="ac_sub_unit" property="acSubUnit" jdbcType="INTEGER" />
		<result column="ac_earmark" property="acEarmark" jdbcType="INTEGER" />
		<result column="ac_sub_auto" property="acSubAuto" jdbcType="INTEGER" />
		<result column="sub_money" property="subMoney" jdbcType="DECIMAL" />
		<result column="ac_overdraw" property="acOverdraw" jdbcType="DECIMAL" />
		<result column="sub_max_m" property="subMaxM" jdbcType="DECIMAL" />
		<result column="make_max_m" property="makeMaxM" jdbcType="DECIMAL" />
		<result column="ac_time_state" property="acTimeState" jdbcType="INTEGER" />
		<result column="ac_each" property="acEach" jdbcType="INTEGER" />
		<result column="ac_each_rule" property="acEachRule" jdbcType="INTEGER" />
		<result column="ac_time_offset" property="acTimeOffset"
			jdbcType="INTEGER" />
		<result column="ac_time_type" property="acTimeType" jdbcType="INTEGER" />
		<result column="ac_time_day" property="acTimeDay" jdbcType="DECIMAL" />
		<result column="ac_time_mould" property="acTimeMould" jdbcType="INTEGER" />
		<result column="pass_max" property="passMax" jdbcType="INTEGER" />
		<result column="tally_max_m" property="tallyMaxM" jdbcType="INTEGER" />
		<result column="tally_max_t" property="tallyMaxT" jdbcType="INTEGER" />
		<result column="ac_regserial" property="acRegserial" jdbcType="NVARCHAR" />
		<result column="regserial" property="regserial" jdbcType="NVARCHAR" />
		<result column="ac_timeeach_type" property="acTimeeachType"
			jdbcType="INTEGER" />
		<result column="ac_timeeach_day" property="acTimeeachDay"
			jdbcType="INTEGER" />
		<result column="ac_timeeach_mould" property="acTimeeachMould"
			jdbcType="INTEGER" />
		<result column="ac_each_auto" property="acEachAuto" jdbcType="INTEGER" />
	</resultMap>

	<select id="selectDtAcTypeByPrimaryKey" resultMap="DtAcTypeResultMap"
		parameterType="java.lang.String">
		select ac_bh, ac_name, money_type, reg_money, reg_manage, reg_ratio,
		ac_limit, ac_jssj,
		ac_pass, ac_pass_rule, ac_subsidy, ac_sub_rule, ac_sub_limit, discount_rate,
		money_max,
		money_min, day_max_m, day_max_t, meal_max_m, meal_max_t, time_max_m, ac_unit,
		ac_sub_unit,
		ac_earmark, ac_sub_auto, sub_money, ac_overdraw, sub_max_m, make_max_m,
		ac_time_state,
		ac_each, ac_each_rule, ac_time_offset, ac_time_type, ac_time_day,
		ac_time_mould,
		pass_max, tally_max_m, tally_max_t, ac_regserial, regserial, ac_timeeach_type,
		ac_timeeach_day,
		ac_timeeach_mould, ac_each_auto
		from dbo.dt_ac_type
		where ac_bh = #{acBh,jdbcType=CHAR}
	</select>

	<insert id="insertDtAcUser" parameterType="com.cecep.model.DtUser">
		insert into dbo.dt_ac_user (user_serial, ac_type, ac_order,
		ac_money, ac_addm, ac_subm,
		ac_regm, ac_pass, ac_kssj,
		ac_jssj, ac_state, sj,
		gly_no, ac_overdraw, ac_make,
		ac_addo, ac_subo, ac_eachm,
		ac_eacho, ac_delm, ac_no, ac_change)
		values (#{userSerial,jdbcType=BIGINT}, #{acBh,jdbcType=CHAR}, 0,
		0, 0, 0, 0, '123456', #{acBegin,jdbcType=TIMESTAMP},
		#{acEnd,jdbcType=TIMESTAMP},
		0, #{acBegin,jdbcType=TIMESTAMP}, #{glyNo,jdbcType=NVARCHAR}, 0, 0, 0,
		0, 0,
		0, 0, #{user1,jdbcType=CHAR}, 0)
	</insert>

	<update id="updateDtAcUser" parameterType="com.cecep.model.DtUser">
		update dbo.dt_ac_user
		set ac_type = #{acBh,jdbcType=CHAR}, ac_kssj =
		#{acBegin,jdbcType=TIMESTAMP}, ac_jssj = #{acEnd,jdbcType=TIMESTAMP},
		sj = #{acBegin,jdbcType=TIMESTAMP}, gly_no =
		#{glyNo,jdbcType=NVARCHAR}
		where user_serial = #{userSerial,jdbcType=BIGINT}
	</update>

	<update id="updateUserAcByPrimaryKey" parameterType="java.lang.Long">
		update dbo.dt_user
		set user_ac = 1
		where user_serial = #{userSerial,jdbcType=BIGINT}
	</update>

	<insert id="insertDtAcLink" parameterType="com.cecep.model.DtUser">
		insert into dbo.dt_ac_link (user_serial, card_serial, card_order,
		ac_money, ac_addm, ac_addo, ac_subm, ac_subo,
		ac_regm, ac_make, ac_eachm, ac_eacho, ac_blockm, ac_blocks, ac_blocke,
		sub_kssj,
		sub_jssj, sub_order, jl_count, ac_state, sj, gly_no, each_jssj, each_kssj,
		each_order,
		card_hao)
		values (#{userSerial,jdbcType=BIGINT}, null, null, 0, 0, 0, 0, 0, 0, 0, 0,
		0, 0, 0, null, null, null, null, 0, 0, getdate(),
		#{glyNo,jdbcType=NVARCHAR}, null, null, null, null)
	</insert>

	<insert id="insertWtPublic" parameterType="com.cecep.model.DtUser">
		insert into dbo.wt_public (lx, is_all, log_type, user_serial,
		dev_serial, card_serial, new_number, old_number,
		log_sj, log_ip, gly_no)
		values (1, 0, 1, #{userSerial,jdbcType=BIGINT}, null, 0, 0, 0, getdate(),
		#{ip,jdbcType=NVARCHAR}, #{glyNo,jdbcType=NVARCHAR})
	</insert>

	<select id="selectUserPassword" parameterType="com.cecep.model.DtUser"
		resultType="java.util.Map">
		select user_password as oldUserPassword
		from dbo.dt_user
		where user_serial = #{userSerial,jdbcType=BIGINT}
	</select>

	<update id="updateUserPassword" parameterType="com.cecep.model.DtUser">
		update dbo.login_account
		set password = #{password,jdbcType=VARCHAR}
		where loginid = #{loginid,jdbcType=VARCHAR}
	</update>

	<select id="getNamesByDepSerials" parameterType="map"
		resultType="string">
		select user_lname from dbo.dt_user where user_type &lt; 30 and
		user_dep in
		<foreach collection="depSerials" item="item" open="(" close=")"
			separator=",">
			#{item}
		</foreach>
	</select>

	<select id="selectSynchronizeUser" parameterType="java.util.Map"
		resultMap="BaseResultMap">
		select
		dbo.dt_user.user_serial,dbo.dt_user.user_no,dbo.dt_user.user_lname,dbo.dt_user.user_depname,dbo.dt_user.user_card
		from dbo.dt_user
		left join dbo.dt_ac_user on dbo.dt_user.user_serial =
		dbo.dt_ac_user.user_serial
		left join dbo.dt_ac_type on dbo.dt_ac_user.ac_type = dbo.dt_ac_type.ac_bh
		where dbo.dt_user.user_no='00000000' and dbo.dt_ac_type.ac_bh is null
		and user_lname=#{userLname} and user_depname=#{userDepname}
	</select>

	<resultMap id="XfAcTimeResultMap" type="com.cecep.model.XfAcTime">
		<id column="xh" property="xh" jdbcType="INTEGER" />
		<result column="dev_serial" property="devSerial" jdbcType="CHAR" />
		<result column="ac_type" property="acType" jdbcType="CHAR" />
		<result column="time_max_m" property="timeMaxM" jdbcType="INTEGER" />
		<result column="time_max_t" property="timeMaxT" jdbcType="INTEGER" />
		<result column="day_order" property="dayOrder" jdbcType="INTEGER" />
		<result column="sj" property="sj" jdbcType="TIMESTAMP" />
		<result column="gly_no" property="glyNo" jdbcType="NVARCHAR" />
		<result column="time_no" property="timeNo" jdbcType="CHAR" />
		<result column="lx" property="lx" jdbcType="INTEGER" />
		<result column="day_offset" property="dayOffset" jdbcType="INTEGER" />
		<result column="acdep_serial" property="acdepSerial" jdbcType="INTEGER" />
		<result column="time_sub" property="timeSub" jdbcType="DECIMAL" />
		<result column="discount_rate" property="discountRate"
			jdbcType="INTEGER" />
		<result column="time_limit" property="timeLimit" jdbcType="INTEGER" />
		<result column="each_unit" property="eachUnit" jdbcType="INTEGER" />
		<result column="regserial" property="regserial" jdbcType="NVARCHAR" />
		<result column="is_timeout" property="isTimeout" jdbcType="INTEGER" />
		<result column="timeout_rate" property="timeoutRate" jdbcType="INTEGER" />
		<result column="ac_time_mould" property="acTimeMould" jdbcType="INTEGER" />
		<result column="ac_sub_auto" property="acSubAuto" jdbcType="INTEGER" />
		<result column="time_eachsub" property="timeEachsub" jdbcType="INTEGER" />
		<result column="ac_name" property="acName" jdbcType="NVARCHAR" />
		<result column="lname" property="lname" jdbcType="NVARCHAR" />
	</resultMap>

	<select id="selectXfAcTime" resultMap="XfAcTimeResultMap"
		parameterType="com.cecep.model.DtUser">
		select row_number() over(order by dbo.xf_ac_time.xh) as rowNumber,
		dbo.xf_ac_time.xh, dbo.xf_ac_time.dev_serial, dbo.xf_ac_time.ac_type,
		dbo.xf_ac_time.time_max_m, dbo.xf_ac_time.time_max_t,
		dbo.xf_ac_time.day_order, dbo.xf_ac_time.sj, dbo.xf_ac_time.gly_no,
		dbo.xf_ac_time.time_no,
		dbo.xf_ac_time.lx, dbo.xf_ac_time.day_offset, dbo.xf_ac_time.acdep_serial,
		dbo.xf_ac_time.time_sub, dbo.xf_ac_time.discount_rate,
		dbo.xf_ac_time.time_limit, dbo.xf_ac_time.each_unit,
		dbo.xf_ac_time.regserial,
		dbo.xf_ac_time.is_timeout, dbo.xf_ac_time.timeout_rate, dbo.xf_ac_time.ac_time_mould,
		dbo.xf_ac_time.ac_sub_auto, dbo.xf_ac_time.time_eachsub,
		dbo.dt_ac_type.ac_name as ac_name, dbo.xf_time.lname as lname
		from dbo.xf_ac_time
		left join dbo.dt_ac_type
		on dbo.xf_ac_time.ac_type = dbo.dt_ac_type.ac_bh
		left join dbo.xf_time
		on dbo.xf_ac_time.time_no = dbo.xf_time.bh
		where lx = 0 and dbo.xf_ac_time.ac_type = #{acBh,jdbcType=CHAR}
	</select>

	<select id="getDoorTree" resultType="com.cecep.model.TreeNode"
		parameterType="java.lang.Integer">
		<if test="value == null">
			select dbo.dt_ac_dep.dep_serial as id,dbo.dt_ac_dep.dep_name as
			text,'closed' as state,'false' as checked
			from dbo.dt_ac_dep
			where dbo.dt_ac_dep.dep_serial in (select acdep_serial from
			dbo.dt_gate_real)
			order by dbo.dt_ac_dep.dep_order
		</if>
		<if test="value != null">
			select dbo.st_door_real.bh as id,dbo.st_door_real.door_name as text,'open'
			as state,'false' as checked
			from dbo.st_door_real
			left join dbo.dt_gate_real
			on dbo.st_door_real.bh = dbo.dt_gate_real.gate_bh
			where dbo.dt_gate_real.acdep_serial = #{value,jdbcType=INTEGER}
			order by dbo.st_door_real.xh
		</if>
	</select>

	<select id="selectStDoorReal" resultType="java.util.Map"
		parameterType="com.cecep.model.DtUser">
		select distinct gate_bh as doorBh
		from dbo.mj_user_rule_real
		where dbo.mj_user_rule_real.user_serial = #{userSerial,jdbcType=BIGINT}
	</select>

	<insert id="insertMjUserRuleReal" parameterType="java.util.Map">
		insert into dbo.mj_user_rule_real (user_serial, gate_bh, fx, rule_no,
		sj, gly_no)
		<foreach item="item" collection="doorBhs" separator="union all"
			index="index">
			select
			#{userSerial,jdbcType=BIGINT},dbo.st_doorfx_real.gate_bh,dbo.st_doorfx_real.fx,1,getdate(),#{glyNo,jdbcType=NVARCHAR}
			from dbo.st_doorfx_real
			where dbo.st_doorfx_real.gate_bh =
			#{item,jdbcType=CHAR}
		</foreach>
	</insert>

	<delete id="deleteMjUserRuleReal" parameterType="com.cecep.model.DtUser">
		delete from dbo.mj_user_rule_real
		where user_serial = #{userSerial,jdbcType=BIGINT}
	</delete>

	<insert id="insertJrealUpdate" parameterType="java.util.Map">
		insert into dbo.jreal_update_1 (jdev_id, jdev_bh, jdodata, juser_id,
		jdata_str,
		jext_type, jtime)
		<foreach item="item" collection="doorBhs" separator="union all"
			index="index">
			select
			0,dbo.st_doorfx_real.dev_serial,0,0,'101,1,0,'+#{cardHao,jdbcType=VARCHAR}+',1,1,'+convert(varchar(1),dbo.st_doorfx_real.fx),
			0,getdate()
			from dbo.st_doorfx_real
			where dbo.st_doorfx_real.gate_bh =
			#{item,jdbcType=CHAR}
		</foreach>
	</insert>

	<delete id="deleteJrealUpdate" parameterType="com.cecep.model.DtUser">
		insert into dbo.jreal_update_1 (jdev_id, jdev_bh, jdodata, juser_id,
		jdata_str, jext_type, jtime, joperator, jip_addr)
		select
		0,dbo.st_doorfx_real.dev_serial,0,0,'101,3,0,'+dbo.dt_card.card_hao+',,1,'+convert(varchar(1),dbo.mj_user_rule_real.fx),0,getdate(),null,null
		from dbo.mj_user_rule_real
		left join dbo.st_doorfx_real
		on dbo.mj_user_rule_real.gate_bh = dbo.st_doorfx_real.gate_bh and
		dbo.mj_user_rule_real.fx = dbo.st_doorfx_real.fx
		left join dbo.dt_card
		on dbo.mj_user_rule_real.user_serial = dbo.dt_card.user_serial
		where dbo.mj_user_rule_real.user_serial = #{userSerial,jdbcType=BIGINT}
	</delete>



	<select id="selectSsologinUser" resultMap="ComplexResultMap"
		parameterType="string">
		select top(1)
		<include refid="DtUser_Column_List" />
		, dbo.dt_card.xh as card_xh, dbo.dt_card.card_hao as card_hao,
		dbo.dt_card.card_serial as card_serial, dbo.dt_card.card_lx as
		card_lx, dbo.tt_card.tt_name as tt_name, dbo.dt_card.card_type as
		card_type, dbo.dt_card.sj as card_sj, dbo.dt_card.card_bz as card_bz,
		dbo.dt_card.loss_count as loss_count, dbo.dt_ac_user.ac_money as
		acMoney, dbo.dt_ac_user.ac_kssj as ac_kssj, dbo.dt_ac_user.ac_jssj as
		ac_jssj, dbo.dt_ac_type.ac_bh as ac_bh, dbo.dt_ac_type.ac_name as
		ac_name, dbo.dt_ac_type.pass_max as pass_max, dbo.dt_ac_card.sj as sj,
		dbo.sys_role.role_id as role_id, dbo.sys_role.role_name as role_name
		from user_account
		LEFT JOIN dbo.dt_user
		on user_account.sn=dt_user.user_no
		left join dbo.dt_card
		on dbo.dt_user.user_serial = dbo.dt_card.user_serial
		left join dbo.tt_card
		on dbo.dt_card.card_lx = dbo.tt_card.tt_xh
		left join dbo.dt_ac_user
		on dbo.dt_user.user_serial = dbo.dt_ac_user.user_serial
		left join dbo.dt_ac_type
		on dbo.dt_ac_user.ac_type = dbo.dt_ac_type.ac_bh
		left join dbo.dt_ac_card
		on dbo.dt_card.card_serial = dbo.dt_ac_card.card_serial
		left join dbo.role_user
		on dbo.dt_user.user_serial = dbo.role_user.user_serial
		left join dbo.sys_role
		on dbo.role_user.role_id =dbo.sys_role.role_id
		where dbo.sys_role.role_deleted = 0 and dbo.sys_role.role_status = 0
		and dbo.user_account.sn = #{sn}
	</select>


	<select id="needServerNotify" parameterType="java.lang.Long"
		resultType="int">
		select count(1)
		from dt_user a
		LEFT JOIN role_user b on
		a.user_serial=b.user_serial
		LEFT JOIN sys_role c on b.role_id=c.role_id
		where c.role_id=1 and a.user_serial=#{userSerial}
	</select>


	<!-- 测试时清空用户数据使用 -->
	<select id="clearRoleUser">
		truncate table role_user
	</select>

	<select id="clearDtAcUser">
		truncate table dt_ac_user
	</select>

	<select id="clearDtUser">
		truncate table dt_user
	</select>

	<select id="clearDtAcLink">
		truncate table dt_ac_link
	</select>

	<select id="selectAllSerial" resultType="java.lang.Long">
		select user_serial from dt_user
	</select>

	<update id="updateWtModuleUser">
		update wt_module set module_user = '20000001' where module_id = '0002'
	</update>

	<delete id="deleteWtPublicUser" parameterType="java.lang.Long">
		delete from wt_public where user_serial = #{userSerial}
	</delete>

	<insert id="insertSelective1" parameterType="com.cecep.model.DtUser">
		insert into dbo.dt_user
		<trim prefix="(" suffix=")" suffixOverrides=",">
			user_serial,
			<if test="userNo != null">
				user_no,
			</if>
			<if test="userLname != null">
				user_lname,
			</if>
			<if test="userFname != null">
				user_fname,
			</if>
			<if test="depNo != null">
				dep_no,
			</if>
			<if test="userDep != null">
				user_dep,
			</if>
			<if test="userDepname != null">
				user_depname,
			</if>
			<if test="userWorkday != null">
				user_workday,
			</if>
			<if test="userDuty != null">
				user_duty,
			</if>
			<if test="userCard != null">
				user_card,
			</if>
			<if test="userFinger != null">
				user_finger,
			</if>
			<if test="userPassword != null">
				user_password,
			</if>
			<if test="pwdBegin != null">
				pwd_begin,
			</if>
			<if test="pwdEnd != null">
				pwd_end,
			</if>
			<if test="userType != null">
				user_type,
			</if>
			<if test="pactBegin != null">
				pact_begin,
			</if>
			<if test="pactEnd != null">
				pact_end,
			</if>
			<if test="userLevel != null">
				user_level,
			</if>
			<if test="userPhoto != null">
				user_photo,
			</if>
			<if test="userSex != null">
				user_sex,
			</if>
			<if test="userNation != null">
				user_nation,
			</if>
			<if test="userXueli != null">
				user_xueli,
			</if>
			<if test="userNative != null">
				user_native,
			</if>
			<if test="userBirthday != null">
				user_birthday,
			</if>
			<if test="userId != null">
				user_id,
			</if>
			<if test="userPost != null">
				user_post,
			</if>
			<if test="userLinkman != null">
				user_linkman,
			</if>
			<if test="userTelephone != null">
				user_telephone,
			</if>
			<if test="userAddress != null">
				user_address,
			</if>
			<if test="userEmail != null">
				user_email,
			</if>
			<if test="user1 != null">
				user_1,
			</if>
			<if test="user2 != null">
				user_2,
			</if>
			<if test="userBz != null">
				user_bz,
			</if>
			<if test="kqRule != null">
				kq_rule,
			</if>
			<if test="kqTaoban != null">
				kq_taoban,
			</if>
			<if test="kqTiaoxiu != null">
				kq_tiaoxiu,
			</if>
			<if test="xfTime != null">
				xf_time,
			</if>
			<if test="xfJiange != null">
				xf_jiange,
			</if>
			<if test="xfJe != null">
				xf_je,
			</if>
			<if test="userSj != null">
				user_sj,
			</if>
			<if test="userRank != null">
				user_rank,
			</if>
			<if test="glyImg != null">
				gly_img,
			</if>
			<if test="userAc != null">
				user_ac,
			</if>
			<if test="userGsbh != null">
				user_gsbh,
			</if>
			<if test="userYglx != null">
				user_yglx,
			</if>
			<if test="userZhbh != null">
				user_zhbh,
			</if>
			<if test="userZhlx != null">
				user_zhlx,
			</if>
			<if test="userTxm != null">
				user_txm,
			</if>
			<if test="userLx != null">
				user_lx,
			</if>
			<if test="userMj != null">
				user_mj,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			#{userSerial,jdbcType=BIGINT},
			<if test="userNo != null">
				#{userNo,jdbcType=NVARCHAR},
			</if>
			<if test="userLname != null">
				#{userLname,jdbcType=NVARCHAR},
			</if>
			<if test="userFname != null">
				#{userFname,jdbcType=NVARCHAR},
			</if>
			<if test="depNo != null">
				#{depNo,jdbcType=VARCHAR},
			</if>
			<if test="userDep != null">
				#{userDep,jdbcType=INTEGER},
			</if>
			<if test="userDepname != null">
				#{userDepname,jdbcType=NVARCHAR},
			</if>
			<if test="userWorkday != null">
				#{userWorkday,jdbcType=TIMESTAMP},
			</if>
			<if test="userDuty != null">
				#{userDuty,jdbcType=NVARCHAR},
			</if>
			<if test="userCard != null">
				#{userCard,jdbcType=NVARCHAR},
			</if>
			<if test="userFinger != null">
				#{userFinger,jdbcType=NVARCHAR},
			</if>
			<if test="userPassword != null">
				#{userPassword,jdbcType=VARCHAR},
			</if>
			<if test="pwdBegin != null">
				#{pwdBegin,jdbcType=TIMESTAMP},
			</if>
			<if test="pwdEnd != null">
				#{pwdEnd,jdbcType=TIMESTAMP},
			</if>
			<if test="userType != null">
				#{userType,jdbcType=SMALLINT},
			</if>
			<if test="pactBegin != null">
				#{pactBegin,jdbcType=TIMESTAMP},
			</if>
			<if test="pactEnd != null">
				#{pactEnd,jdbcType=TIMESTAMP},
			</if>
			<if test="userLevel != null">
				#{userLevel,jdbcType=INTEGER},
			</if>
			<if test="userPhoto != null">
				#{userPhoto,jdbcType=INTEGER},
			</if>
			<if test="userSex != null">
				#{userSex,jdbcType=NVARCHAR},
			</if>
			<if test="userNation != null">
				#{userNation,jdbcType=NVARCHAR},
			</if>
			<if test="userXueli != null">
				#{userXueli,jdbcType=NVARCHAR},
			</if>
			<if test="userNative != null">
				#{userNative,jdbcType=NVARCHAR},
			</if>
			<if test="userBirthday != null">
				#{userBirthday,jdbcType=TIMESTAMP},
			</if>
			<if test="userId != null">
				#{userId,jdbcType=NVARCHAR},
			</if>
			<if test="userPost != null">
				#{userPost,jdbcType=NVARCHAR},
			</if>
			<if test="userLinkman != null">
				#{userLinkman,jdbcType=NVARCHAR},
			</if>
			<if test="userTelephone != null">
				#{userTelephone,jdbcType=NVARCHAR},
			</if>
			<if test="userAddress != null">
				#{userAddress,jdbcType=NVARCHAR},
			</if>
			<if test="userEmail != null">
				#{userEmail,jdbcType=NVARCHAR},
			</if>
			<if test="user1 != null">
				#{user1,jdbcType=NVARCHAR},
			</if>
			<if test="user2 != null">
				#{user2,jdbcType=NVARCHAR},
			</if>
			<if test="userBz != null">
				#{userBz,jdbcType=NVARCHAR},
			</if>
			<if test="kqRule != null">
				#{kqRule,jdbcType=VARCHAR},
			</if>
			<if test="kqTaoban != null">
				#{kqTaoban,jdbcType=NVARCHAR},
			</if>
			<if test="kqTiaoxiu != null">
				#{kqTiaoxiu,jdbcType=INTEGER},
			</if>
			<if test="xfTime != null">
				#{xfTime,jdbcType=TIMESTAMP},
			</if>
			<if test="xfJiange != null">
				#{xfJiange,jdbcType=INTEGER},
			</if>
			<if test="xfJe != null">
				#{xfJe,jdbcType=INTEGER},
			</if>
			<if test="userSj != null">
				#{userSj,jdbcType=TIMESTAMP},
			</if>
			<if test="userRank != null">
				#{userRank,jdbcType=NVARCHAR},
			</if>
			<if test="glyImg != null">
				#{glyImg,jdbcType=INTEGER},
			</if>
			<if test="userAc != null">
				#{userAc,jdbcType=INTEGER},
			</if>
			<if test="userGsbh != null">
				#{userGsbh,jdbcType=VARCHAR},
			</if>
			<if test="userYglx != null">
				#{userYglx,jdbcType=VARCHAR},
			</if>
			<if test="userZhbh != null">
				#{userZhbh,jdbcType=VARCHAR},
			</if>
			<if test="userZhlx != null">
				#{userZhlx,jdbcType=VARCHAR},
			</if>
			<if test="userTxm != null">
				#{userTxm,jdbcType=VARCHAR},
			</if>
			<if test="userLx != null">
				#{userLx,jdbcType=INTEGER},
			</if>
			<if test="userMj != null">
				#{userMj,jdbcType=INTEGER},
			</if>
		</trim>
	</insert>

	<select id="selectAcType" resultType="java.util.Map">
		select ac_bh as value , ac_name as text from dt_ac_type
	</select>

	<!-- 插入考勤记录使用 -->
	<select id="getAllUser" resultMap="BaseResultMap">
		select user_serial,'999999999' as user_card from dt_user
	</select>

	<select id="selectByNameAndCompany" parameterType="com.cecep.model.DtUser"
		resultMap="SimpleResultMap">
		select a.* from dt_user a
		left join cecep_dep_parentSerial b on a.user_dep=b.dep_serial
		where b.parent_serial=(select parent_serial from dt_dep c 
		left join cecep_dep_parentSerial d on c.dep_serial=d.dep_serial where c.dep_serial=#{userDep}) 
		and a.user_lname=#{userLname} and a.dep_no='00000000'
	</select>
	
	<select id="selectChildrenCount" parameterType="java.util.Map" resultType="int">
		select count(*) from dt_user where user_dep in 
		<foreach collection="set" open="(" close=")" separator="," item="item">
			#{item}
		</foreach>
	</select>
	
	<select id="selectByUserNo" parameterType="com.cecep.model.DtUser" resultMap="BaseResultMap">
		select 	b.dm as user_no,
					b.name as user_lname,
					b.sex as user_sex,
					b.extends3 as user_id,
					b.job as user_duty,
					b.unit_id as dep_no,
					cast(b.csrq as datetime) as user_birthday,
					b.zgxl as user_xueli,
					b.telephone as user_telephone,
					b.email as user_email,
					b.jiq as user_native,
					b.minzu as user_nation,
					b.homepost as user_post,
					b.homeaddr as user_address,
					b.remark as user_bz,
					a.dep_serial as user_dep,
					a.dep_name as user_depname,
					a.dep_no as user_no
			from mid_user b,dt_dep a 
		where b.dm=#{userNo} and a.dep_serial=#{userDep}
	</select>
	
	<select id="checkUserManager" parameterType="java.util.Map" resultType="int">
		select count(*) from dt_user a 
			left join role_user b on a.user_serial=b.user_serial
			left join sys_role c on b.role_id=c.role_id
			LEFT JOIN menu_role d on c.role_id=d.role_id
			LEFT JOIN sys_menu e on d.menu_id=e.menu_id
		where a.user_serial=#{userSerial} and e.url LIKE '%${url}%'
	</select>
	
	<update id="updateUserOrder" parameterType="java.lang.Long">
		update cecep_user_privilege set user_order=999 where user_serial=#{user_serial}
	</update>
	
	<update id="updateWhenDepChange" parameterType="com.cecep.model.DtDep">
		update dt_user set user_depname=#{depName} where user_dep=#{depSerial}
	</update>
</mapper>